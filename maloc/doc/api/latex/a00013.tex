\section{vcom.h File Reference}
\label{a00013}\index{vcom.h@{vcom.h}}


Class Vcom: virtual (currently just MPI) communications layer.  


{\ttfamily \#include $<$maloc/maloc\_\-base.h$>$}\par
{\ttfamily \#include $<$maloc/vsys.h$>$}\par
Include dependency graph for vcom.h:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=400pt]{a00037}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=94pt]{a00038}
\end{center}
\end{figure}
\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct {\bf sVcom}
\begin{DoxyCompactList}\small\item\em Contains public data members for Vcom class. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Defines}
\begin{DoxyCompactItemize}
\item 
\#define {\bf VCOM\_\-MPI\_\-TAG}~111
\begin{DoxyCompactList}\small\item\em A base value for MPI tags. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct {\bf sVcom} {\bf Vcom}
\begin{DoxyCompactList}\small\item\em Declaration of the Vcom class as the Vcom structure. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int {\bf Vcom\_\-init} (int $\ast$argc, char $\ast$$\ast$$\ast$argv)
\begin{DoxyCompactList}\small\item\em The Vmp initializer. \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-finalize} (void)
\begin{DoxyCompactList}\small\item\em The Vmp finalizer. \item\end{DoxyCompactList}\item 
{\bf Vcom} $\ast$ {\bf Vcom\_\-ctor} (int commtype)
\begin{DoxyCompactList}\small\item\em Construct the communications object. This routine sets up data members of class and initializes MPI. \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-ctor2} ({\bf Vcom} $\ast$thee, int commtype)
\begin{DoxyCompactList}\small\item\em Construct the communications object. This routine sets up data members of class and initializes MPI. This is broken into two parts to be callable from FORTRAN. \item\end{DoxyCompactList}\item 
void {\bf Vcom\_\-dtor} ({\bf Vcom} $\ast$$\ast$thee)
\begin{DoxyCompactList}\small\item\em Destroy the communications object. \item\end{DoxyCompactList}\item 
void {\bf Vcom\_\-dtor2} ({\bf Vcom} $\ast$thee)
\begin{DoxyCompactList}\small\item\em Destroy the communications object. This is broken into two parts to be callable from FORTRAN. \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-send} ({\bf Vcom} $\ast$thee, int des, void $\ast$buf, int len, int type, int block)
\begin{DoxyCompactList}\small\item\em Send a buffer. Returns 1 on success. \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-recv} ({\bf Vcom} $\ast$thee, int src, void $\ast$buf, int len, int type, int block)
\begin{DoxyCompactList}\small\item\em Receive a (character) buffer. \par
 The blocking flag is present, but not used. All receives are assumed to be blocking. A non-\/blocking receive would be $\ast$very$\ast$ ugly to implement (signals or something?). \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-getCount} ({\bf Vcom} $\ast$thee, int src, int $\ast$length, int type)
\begin{DoxyCompactList}\small\item\em Perform a blocking probe to get the length (in number of items of specified type) of an incoming message and place it in the argument ``length". \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-reduce} ({\bf Vcom} $\ast$thee, void $\ast$sendbuf, void $\ast$recvbuf, int length, int type, int op)
\begin{DoxyCompactList}\small\item\em Perform a reduction of the data across all processors. This is equivalent (and in the case of MPI is identical to) MPI\_\-Allreduce. Basically, the specified operations are appleed to each member of the sendbuf across all processors and the results are written to recvbuf. \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-size} ({\bf Vcom} $\ast$thee)
\begin{DoxyCompactList}\small\item\em Get the number of PEs in communicator. \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-resize} ({\bf Vcom} $\ast$thee, int newsize)
\begin{DoxyCompactList}\small\item\em Resize (shrink) the communications group to include only newsize number of processors. \par
 Obsolete processes are given rank of -\/1 and size of 0. \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-rank} ({\bf Vcom} $\ast$thee)
\begin{DoxyCompactList}\small\item\em Get the ID of the local PE. \item\end{DoxyCompactList}\item 
int {\bf Vcom\_\-barr} ({\bf Vcom} $\ast$thee)
\begin{DoxyCompactList}\small\item\em Synchronization barrier. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Class Vcom: virtual (currently just MPI) communications layer. \begin{DoxyAuthor}{Authors}
Nathan Baker and Michael Holst 
\end{DoxyAuthor}
\begin{DoxyNote}{Note}
None 
\end{DoxyNote}
\begin{DoxyVersion}{Version}

\end{DoxyVersion}
\begin{DoxyParagraph}{Id:}
\doxyref{vcom.h}{p.}{a00013},v 1.38 2010/08/12 05:40:23 fetk Exp 
\end{DoxyParagraph}


\begin{DoxyAttention}{Attention}
\begin{DoxyVerb}
 *
 * MALOC = < Minimal Abstraction Layer for Object-oriented C >
 * Copyright (C) 1994-- Michael Holst
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
 * 
 *  \end{DoxyVerb}
 
\end{DoxyAttention}


\subsection{Define Documentation}
\index{vcom.h@{vcom.h}!VCOM\_\-MPI\_\-TAG@{VCOM\_\-MPI\_\-TAG}}
\index{VCOM\_\-MPI\_\-TAG@{VCOM\_\-MPI\_\-TAG}!vcom.h@{vcom.h}}
\subsubsection[{VCOM\_\-MPI\_\-TAG}]{\setlength{\rightskip}{0pt plus 5cm}\#define VCOM\_\-MPI\_\-TAG~111}\label{a00013_a81c395f6f83ae48ed287066004e4795d}


A base value for MPI tags. 

